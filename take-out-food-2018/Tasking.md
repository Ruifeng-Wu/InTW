# Tasking

### 5W1H

*where when who→where what how why→where*

**输入→处理→输出**

输入总共有下面几大类： 

1. 参数 

2. 读取全局变量 

3. 调用全局函数后得到的返回值 

4. 读取局部作用域变量（比如this） 

5. 调用局部函数后得到的返回值 

6. hard code的数据

输出总共有下面几大类： 

1. 返回值 

2. 修改全局变量 

3. 调用全局函数时传的参数 

4. 修改局部作用域变量（比如this） 

5. 调用局部函数时传的参数

### 任务列表法

- 问题列表达到完全穷尽
- 问题列表各自独立

### PDCA（plan-do-check-action）

- 列任务列表
- 估计时间
- check时间是否达标，反思并产生action，纳入未来的plan

### 思考过程（Analytical Thinking）

1. 分解问题
2. 找到子问题之间的关联（通过输入输出关联起来）
3. 找到问题的边界，明确假设与结果

### 数据的细节

1. 数据类型
2. 数据结构

### 画图的规则

1. 本图基本元素由方块和带箭头的线组成
2. 一个方块只代表一个函数或一个代码块，通常是函数，方块中可以写字，可以表达函数是属于哪个类或哪个实例等信息。
3. 指向方块的线代表该函数的输入，背离方块的线代表函数的输出。
4. 数据流动的时间轴遵守先从左到右，再从上到下的顺序。
5. 每一对输入输出（输入在上，输出在下）加一个方块，表达了一次函数调用。

### 重构——概念性思考

1. 看到复杂场景背后的核心本质
2. 识别到两个不相关的情景的相似之处
3. 用比喻或类比来解释场景
4. 用一个框架去解决问题

### 框架的三个概念

Router，Command和Service

Router负责当每一个用户输入进来的时候，它知道去找哪一个具体的响应者，这个响应者就是我们的Command。 
Router通过简单的输入解析，找到具体的Command，Command负责处理各种具体的用户输入解析，但是有一些核心的计算，比如说添加学生信息，我们定义为Service。Command会调用Service函数和将Service计算结果翻译为用户友好的输出。当Command处理完一切，就会返回结果，结果就会统一的输出。Command一般不直接输出到用户接口，这样就会便于测试，就像我们所有的WebMVC框架一样。管理这些输入输出的是我们的main函数，它还会负责把我们的Router，Command配置在一起，像极了WebMVC里的配置文件。

过程方面分析完了，在数据方面，我们只需要把Service和Command之间的通讯，Command和最外层之间的通讯抽象出一些概念就可以了，比如Service和Command之间的数据可以叫Response，Command和最外层之间的数据可以叫View。

------



1#需求描述

某快餐品牌推出了它独家的外卖应用，用户可以在手机上直接下单。该应用会根据用户选择的菜品(Item)、数量(Count)和优惠方式(Promotion)进行计算，告诉用户需要支付的金额(Charge)。

优惠活动有多种形式。假设用户一次只能使用一种优惠，那么使用哪种优惠省钱最多就会是一个让用户头疼的问题。所以该外卖应用为了方便用户，在用户下单时，会自动选择最优惠的方式并计算出最终金额让用户确认。

我们需要实现一个名为`bestCharge`的函数，它能够接收用户选择的菜品和数量（以特定格式呈现）作为输入，然后返回计算后的汇总信息。

已知：

- 该店的菜品每一个都有一个唯一的id
- 当前的优惠方式有:
  - 满30减6元
  - 指定菜品半价
- 除菜品外没有其它收费（如送餐费、餐盒费等）
- 如果两种优惠方式省钱一样多，则使用前一种优惠方式

输入样例

```
["ITEM0001 x 1", "ITEM0013 x 2", "ITEM0022 x 1"]
```

##### 输出样例

```
============= 订餐明细 =============
黄焖鸡 x 1 = 18元
肉夹馍 x 2 = 12元
凉皮 x 1 = 8元
-----------------------------------
使用优惠:
指定菜品半价(黄焖鸡，凉皮)，省13元
-----------------------------------
总计：25元
===================================
```

使用另一种优惠的样例

输入：

```
["ITEM0013 x 4", "ITEM0022 x 1"]
```

输出：

```
============= 订餐明细 =============
肉夹馍 x 4 = 24元
凉皮 x 1 = 8元
-----------------------------------
使用优惠:
满30减6元，省6元
-----------------------------------
总计：26元
===================================
```

##### 如果没有优惠可享受

输入：

```
["ITEM0013 x 4"]
```

输出：

```
============= 订餐明细 =============
肉夹馍 x 4 = 24元
-----------------------------------
总计：24元
===================================
```

### 任务划分

```
#1 获得订单菜品信息
输入:
	selectedItems:[String]
	itemsInfo：[{
		id:String,
		name:String,
		price:Number
}]:loadAllItems()

输出：
	orderDetails{
		id:String,
		name:String,
		price:Number,
        amount:Number
	}
	
	

#2 计算菜品价格
输入：
	orderDetails
	promotions:[items]:loadPromotions()
	
输出：
	summary:{
		total:Number,
        promotionsType:string,
		totalPromotions:Number  
}

#3 打印订单明细
输入：
	orderDetails
	summary

输出：
	result：String
```

------

### 2#需求描述

商店里进行购物结算时会使用收银机（POS）系统，这台收银机会在结算时根据客户的购物车（Cart）中的商品（Item）和商店正在进行的优惠活动（Promotion）进行结算和打印购物清单。

已知该商店正在对部分商品进行“买二赠一”的优惠活动。

我们需要实现一个名为`printInventory`函数，该函数能够将指定格式的数据作为参数输入，然后在浏览器的控制台中输出结算清单的文本。

输入格式（样例）：

```
[
    'ITEM000001',
    'ITEM000001',
    'ITEM000001',
    'ITEM000001',
    'ITEM000001',
    'ITEM000003-2',
    'ITEM000005',
    'ITEM000005',
    'ITEM000005'
]
```

其中对'ITEM000003-2'来说,"-"之前的是标准的条形码,"-"之后的是数量。 当我们购买需要称量的物品的时候,由称量的机器生成此类条形码,收银机负责识别生成小票。

清单内容（样例）： 

```
***<没钱赚商店>购物清单***
名称：可口可乐，数量：3瓶，单价：3.00(元)，小计：6.00(元)
名称：羽毛球，数量：5个，单价：1.00(元)，小计：4.00(元)
名称：苹果，数量：2斤，单价：5.50(元)，小计：11.00(元)
----------------------
挥泪赠送商品：
名称：可口可乐，数量：1瓶
名称：羽毛球，数量：1个
----------------------
总计：21.00(元)
节省：4.00(元)
**********************
```